{
    "contents" : "#--------Functions--------\nOnStartUp = function ()\n{\n  # Load packages\n  packs = c(\"magrittr\", \"dplyr\", \"ggplot2\", \"lubridate\", \"ggplot2\", \"ggthemes\", \"reshape2\", \"gridExtra\")\n  sapply(packs, require, character.only=TRUE)   # Load the packages.\n}\n\nReadHoursCSV = function () \n{\n  # Load data\n  path = \"~/Google Drive/100 - Publicly hosted/Austin Pets Alive/database/APA_volunteer_explore/hours.csv\"\n  hours.orig = read.csv(path, na.strings=\"\") %>%\n    select(-starts_with(\"Create\"),\n           -DatabaseTimelogEntryId, -DateEntered, -DateUpdated, -EntryType, \n           -DatabaseActivityReportGroupId, -ClockStartDate, -ClockEndDate)\n  \n  # Set factors\n  hours.orig$DatabaseActivityCategoryId <- as.factor(hours.orig$DatabaseActivityCategoryId)\n  hours.orig$DatabaseActivityId         <- as.factor(hours.orig$DatabaseActivityId)\n  hours.orig$DatabaseUserId             <- as.factor(hours.orig$DatabaseUserId)\n  hours.orig <- mutate(hours.orig, DateVolunteered = mdy_hms(DateVolunteered)) %>%\n    filter(DateVolunteered > ymd(\"2013-12-31\"), DateVolunteered < ymd(\"2015-10-05\"), \n           ActivityCategoryName != \"APA! Staff\", ActivityCategoryName != \"New Volunteers\")\n  \n  # Return CSV as data frame\n  hours.orig\n}\n\nGetHoursClock = function (df)\n{\n  # Accepts a data frame from before\n  df = filter(df, !is.na(ClockStartTime)) %>%\n    mutate(\n      ClockStartTime = paste(DateVolunteered, ClockStartTime),\n      ClockEndTime   = paste(DateVolunteered, ClockEndTime)\n    ) %>%\n    mutate(\n      ClockStartTime = ymd_hm(ClockStartTime),\n      ClockEndTime   = ymd_hm(ClockEndTime)\n    )\n  \n  # Make column measuring minutes\n  df$MinutesWorked = df$HoursWorked * 60\n  \n  # Return df\n  df\n}\n# - - -END Functions - - - -\n\n#--------Load data--------\nOnStartUp()\nhours.import = ReadHoursCSV()\nhours.clock  = GetHoursClock(hours.import)\n# hours        = filter(hours.import, is.na(ClockStartTime))\nrm(hours.import)\n\n#--------Define plots--------\ndogs   = c(\"Dog Program - Behavior\", \"Dog Program - Big Brother/Big Sister\", \"Dog Program - TLAC\", \"Dog Program - Marketing\")\ncats   = c(\"Specialty - Neonatal (BB)\", \"Cat Program - TLAC\", \"Cat Program - Support\", \"Cat Program - Marketing\")\nothers = c(\"Behind the Scenes\", \"Community Service Restitution\", \"General, Administrative & Facilities\", \"Specialty - Clinic\")\n\nnames(hours.clock)\ndf = filter(hours.clock, \n            ClockStartTime < ClockEndTime,\n            DateVolunteered > ymd(\"2014-09-23\"),\n            HoursWorked > 0.25)\n\nfilter(df, ActivityCategoryName %in% dogs) %>% \n# filter(df, ActivityCategoryName == \"Dog Program - TLAC\") %>% \n  ggplot(\n    aes(xmax = hour(ClockEndTime), \n        xmin = hour(ClockStartTime), \n        ymin = (DateVolunteered) - days(1),\n        ymax = (DateVolunteered),\n        fill = ActivityCategoryName)\n  ) + geom_rect(alpha=0.10) + facet_wrap(\"ActivityCategoryName\")\n  # mutate(VolSpan = as.period(new_interval(ClockStartTime, ClockEndTime), start = (start)) %>%\n\n  \n\n\n\nhead(hours.clock)\nSTART = hours.clock$ClockStartTime[1]\nEND = hours.clock$ClockEndTime\nSTART - day(START)\nx = as.period()\nsummary(x)\n",
    "created" : 1444111292050.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "0|18|48|28|\n",
    "hash" : "3862365413",
    "id" : "BAABFE9",
    "lastKnownWriteTime" : 1444115183,
    "path" : "~/Google Drive/100 - Publicly hosted/Austin Pets Alive/database/APA_volunteer_explore/By time of day/By time of day.R",
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}